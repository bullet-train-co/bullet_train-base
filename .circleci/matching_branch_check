# Default to the main branch if we don't find a matching branch on the starter repository.
STARTER_REPO_BRANCH="main"

BRANCH_NAMES=$(curl -H "Accept: application.vnd.github+json" https://api.github.com/repos/bullet-train-co/bullet_train/branches | jq '.[].name')
CIRCLE_PR_BRANCH=$(curl -s https://api.github.com/repos/${CIRCLE_PROJECT_USERNAME}/${CIRCLE_PROJECT_REPONAME}/pulls/${CIRCLE_PR_NUMBER} | jq -r '.head.ref')

echo $CIRCLE_PR_BRANCH

# TODO: Check if CIRCLE_PR_BRANCH equals the branch name
for BRANCH in $BRANCH_NAMES; do
  echo ${BRANCH}
done

# TODO: If we can get the matching branch, add the flag here
git clone https://github.com/bullet-train-co/bullet_train.git tmp/starter
